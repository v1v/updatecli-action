name: "deps: Bump updatecli version"
pipelineid: updatecli
actions:
    default:
        title: Bump updatecli version to {{ source "updatecli" }}
        kind: github/pullrequest
        spec:
            automerge: true
            mergemethod: squash
            usetitleforautomerge: true
            labels:
                - dependencies
                - updatecli
        scmid: default
scms:
    default:
        kind: github
        spec:
            branch: test
            email: me@olblak.com
            owner: v1v
            repository: updatecli-action
            token: '{{requiredEnv "GITHUB_TOKEN"}}'
            user: updatecli
            username: github-actions
        disabled: false
sources:
    updatecli:
        name: Get latest updatecli version
        kind: githubrelease
        spec:
            owner: updatecli
            repository: updatecli
            token: '{{requiredEnv "GITHUB_TOKEN"}}'
targets:
    src-main:
        name: Bump updatecli version in src/main.js
        kind: file
        spec:
            file: src/main.js
            matchpattern: "const DEFAULT_VERSION = (.+)"
            replacepattern: 'const DEFAULT_VERSION = `{{ source "updatecli" }}`'
        scmid: default
        sourceid: updatecli
    test-main:
        name: Bump updatecli version in tests/main.test.js
        kind: file
        spec:
            file: tests/main.test.js
            matchpattern: "const DEFAULT_VERSION = (.+)"
            replacepattern: 'const DEFAULT_VERSION = `{{ source "updatecli" }}`'
        scmid: default
        sourceid: updatecli
